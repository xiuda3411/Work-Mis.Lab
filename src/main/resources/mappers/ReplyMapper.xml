<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybaits.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.edu.cqupt.mislab.work.dao.ReplyDao">
    <sql id="reply">
        id,discuss_id,user_id,praise,text,time
    </sql>
    <!--新增评论-->
    <insert id="addReply">
        INSERT reply(discuss_id,user_id,text)
        VALUE (#{discussId},#{userId},#{text})
    </insert>
    <!--删除评论-->
    <delete id="deleteReply">
        DELETE FROM reply
        WHERE id = #{replyId}
    </delete>
    <!--查询评论-->
    <select id="searchReply" resultType="cn.edu.cqupt.mislab.work.domain.entity.Reply">
        select <include refid="reply"/>
        FROM reply
        WHERE discuss_id = #{discussId}
    </select>
    <!--查询被评论人-->
    <select id="searchReplied" resultType="java.lang.Integer">
        select discuss.id
        FROM discuss
        WHERE id = #{discussId}
    </select>
</mapper>